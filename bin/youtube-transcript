#!/usr/bin/env raku
use v6.d;

use WWW::YouTube;

my %*SUB-MAIN-OPTS =
        :named-anywhere,
        # allow named variables at any location
        ;

#| Get YouTube transcripts.
sub MAIN(
        Str:D $id,                       #= Video identifier.
        Str:D :f(:$format) = 'text',     #= Format of the result, one of 'text', 'dataset', or 'json'.
        Str:D :m(:$method) = 'Whatever', #= Method to use, one of 'Whatever', 'http', 'raku', 'raku-http', 'cli', 'python', 'python-cli'.
         ) {
    if ($method.lc eq 'whatever') { $method = 'python' }
    my $res = youtube-transcript($id, :$format, :$method);
    if $format.lc âˆˆ <dataset raku> { $res .= raku }
    say $res;
}
